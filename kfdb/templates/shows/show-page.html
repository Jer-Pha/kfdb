{% extends 'base.html' %}
{% load static %}

{% block title %}
  {{ show.name }}
{% endblock %}

{% block meta %}
  <meta name="author" content="{{ show.name }}" />
  <meta name="description"
  content={% if show.blurb %}
    "{{ show.blurb|safe }}"
  {% else %}
    "The original database for Kinda Funny content. Filter, sort and search by channel, show, host. Made for the community, by the community."
  {% endif %} />
  <meta name="keywords" content="Kinda Funny, KF, Video Games, Podcast, Reactions, Twitch, YouTube, KFBF, Nerd Culture, {{ show.name }}" />
{% endblock %}

{% block main %}
  <div class="drawer md:drawer-open min-h-[inherit]">
    <input id="filter-drawer" type="checkbox" class="drawer-toggle" />
    <div class="drawer-content flex flex-col bg-base-100 xs:px-2">
      <div class="flex flex-col xs:flex-row pb-2 xs:py-4">
        <div class="xs:mx-4">
          {% if show.image %}
            <img src="{{ show.image.url }}" alt="{{ show.name }}" class="h-auto w-screen xs:min-w-40 xs:w-40 xs:h-40 xl:min-w-56 xl:w-56 xl:h-56 rounded-none xs:rounded md:rounded-md aspect-square object-cover" />
          {% else %}
            <img src="{% static 'img/not-found.webp' %}" class="h-auto w-screen xs:min-w-40 xs:w-40 xs:h-40 xl:min-w-56 xl:w-56 xl:h-56 rounded-none xs:rounded md:rounded-md aspect-square object-cover" alt="Show not found" />
          {% endif %}
        </div>
        <div class="flex flex-col xs:max-h-40 lg:max-h-56 w-full">
          <h1 class="text-xl xs:text-3xl md:text-xl lg:text-3xl xl:text-4xl text-base-content self-center">
            {{ show.name }}
          </h1>
          <div class="flex flex-row">
            <hr class="flex-1 my-auto" />
            <span class="text-sm xs:text-base font-bold self-center">
              {% for channel in show.channels.all %}
                {% if 'channel=' not in request.get_full_path %}
                  {% if not forloop.last %}
                    &nbsp;&nbsp;<a href="{% url 'channel_page' channel=channel.slug %}" class="link link-hover">{{ channel.name }}</a>&nbsp;&nbsp;|
                  {% elif forloop.counter0 == 0 %}
                    &nbsp;&nbsp;<a href="{% url 'channel_page' channel=channel.slug %}" class="link link-hover">{{ channel.name }}</a>&nbsp;&nbsp;
                  {% else %}
                    &nbsp;<a href="{% url 'channel_page' channel=channel.slug %}" class="link link-hover">{{ channel.name }}</a>&nbsp;&nbsp;
                  {% endif %}
                {% elif 'channel='|add:channel.slug in request.get_full_path %}
                  &nbsp;&nbsp;<a href="{% url 'channel_page' channel=channel.slug %}" class="link link-hover">{{ channel.name }}</a>&nbsp;&nbsp;
                {% endif %}
              {% empty %}
                Kinda Funny
              {% endfor %}
            </span>
            <hr class="flex-1 my-auto" />
          </div>
        </div>
        {% comment %} {% if show.blurb %}
          <div class="absolute top-[6.5rem] xs:top-40 xl:top-[13.5rem] right-4">
            <div class="dropdown dropdown-bottom dropdown-end rounded-full bg-white">
              <div tabindex="0" role="button" class="m-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 xl:w-8 xl:h-8 fill-info -m-2" viewBox="0 -960 960 960">
                  <path d="M420-259h120v-261H420v261Zm59.82-327q27.68 0 45.93-18.07Q544-622.15 544-649.82q0-27.68-18.07-45.93Q507.85-714 480.18-714q-27.68 0-45.93 18.07Q416-677.85 416-650.18q0 27.68 18.07 45.93Q452.15-586 479.82-586ZM480-34q-92.64 0-174.47-34.6-81.82-34.61-142.07-94.86T68.6-305.53Q34-387.36 34-480q0-92.9 34.66-174.45 34.67-81.55 95.18-141.94 60.51-60.39 142.07-95Q387.48-926 480-926q92.89 0 174.48 34.59 81.59 34.6 141.96 94.97 60.37 60.37 94.97 141.99Q926-572.83 926-479.92q0 92.92-34.61 174.25-34.61 81.32-95 141.83Q736-103.33 654.45-68.66 572.9-34 480-34Z" />
                </svg>
              </div>
              <div tabindex="0" class="dropdown-content card card-compact bg-primary text-primary-content z-10 w-64 max-w-[100vw] p-2 shadow">
                <div class="card-body !p-2">
                  <span class="text-justify space-y-2">{{ show.blurb|safe }}</span>
                </div>
              </div>
            </div>
          </div>
        {% endif %} {% endcomment %}
      </div>
      <label for="filter-drawer" class="btn btn-accent btn-square drawer-button fixed h-[3.25rem] w-[3.25rem] shadow top-[calc((var(--vh,1vh)*100)-5.25rem)] left-8 z-[19] rounded-full md:hidden" aria-label="Search, Sort, and Filter">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 fill-accent-content" viewBox="0 -960 960 960">
          <path d="M455.39-180q-15.08 0-25.23-10.16Q420-200.31 420-215.39v-231.53L192.69-735.85q-11.12-13.64-3.14-28.89Q197.54-780 214.44-780h531.12q16.9 0 24.89 15.26 7.98 15.25-3.14 28.89L540-446.92v231.53q0 15.08-10.16 25.23Q519.69-180 504.61-180h-49.22ZM480-452.31l218.56-277.43H261.44L480-452.31Zm0 0Z" />
        </svg>
      </label>
      {% include 'core/partials/get-video-results.html' %}
    </div>
    {% include 'core/partials/build-sidebar.html' %}
  </div>
{% endblock %}
